(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(52),c=a.n(r),s=(a(84),a(28)),i=a(29),l=a(31),u=a(30),d=a(32),m=a(24),p=a.n(m),g=a(78),y=function(e){var t=e.open,a=Object(g.a)(e,["open"]);return o.a.createElement("div",Object.assign({className:t?"burger-menu open":"burger-menu"},a),o.a.createElement("div",{className:"bar1",key:"b1"}),o.a.createElement("div",{className:"bar2",key:"b2"}),o.a.createElement("div",{className:"bar3",key:"b3"}))},v=a(76),f=a.n(v),h=a(77),b=a.n(h),E=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"locationsFilter",role:"application"},o.a.createElement("input",{type:"text",autoFocus:!0,id:"query-Filter",placeholder:"Search...","aria-label":"Locations filter",onChange:function(t){return e.props.updateQuery(t.target.value)}}))}}]),t}(n.Component),w=(a(195),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getRestrooms=function(){var e,t={method:"GET",headers:new Headers,mode:"cors",cache:"default"},n=new Request("https://api.myjson.com/bins/d8i44",t);fetch(n).then(function(e){if(e.ok)return e.json();throw new Error("No network response.  Please try again later.")}).then(function(t){e=t,a.setState({locations:e}),a.mapInit(e)}).catch(function(e){return console.log("Error: ",e)})},a.mapInit=function(e){p.a.accessToken=a.state.api_key;var t=a.state,n=t.lng,o=t.lat,r=t.zoom,c=new p.a.Map({container:a.mapContainer,style:"mapbox://styles/papanugget/cjmmeyf99ddth2rnyoua824ey",center:[n,o],zoom:r});function s(e){var t=e.properties,a=document.getElementsByClassName("mapboxgl-popup");a[0]&&a[0].remove();new p.a.Popup({closeOnClick:!1}).setLngLat(e.geometry.coordinates).setHTML("<h3>".concat(t.name,"</h3>\n                      <h4>Address: ").concat(t.address,'</h4>\n                      <div class="details">').concat(t.year_round?"Open year round":"",'</div>\n                      <div class="details">').concat(t.handicap_a11y?'<div id="a11y"></div>':"","\n            ")).addTo(c)}function i(e){c.flyTo({center:e.geometry.coordinates,zoom:15})}c.on("load",function(){c.addLayer({id:"locations",type:"symbol",source:{type:"geojson",data:e},layout:{"icon-image":"custom-marker","icon-allow-overlap":!0}}),function(e){e.features.map(function(e,t){var a=document.createElement("div");a.classList="marker",new p.a.Marker(a,{offset:[0,-20]}).setLngLat(e.geometry.coordinates).addTo(c),a.addEventListener("click",function(a){var n=document.getElementsByClassName("active");a.stopPropagation(),s(e),i(e),n[0]&&n[0].classList.remove("active");var o=document.getElementById("listing-".concat(t));o.classList.add("active")})})}(e),function(e){e.features.map(function(t,a){var n=t,o=n.properties,r=document.getElementById("locations"),c="<div class='item' id=listing-".concat(a,">\n                                <a href='#' class='title' data-value=").concat(a,">").concat(o.name,"</a>\n                                <div class='details'>").concat(o.address,"<br>").concat(o.year_round?"Open Year Round":""," ").concat(o.handicap_a11y?"Handicap Accessible":"","<br>\n                                </div>   \n                            </div><br>");r.innerHTML+=c,r.addEventListener("click",function(t){var a=document.getElementsByClassName("active");if(a[0]&&a[0].classList.remove("active"),"title"===t.target.className){var n=e.features[t.target.getAttribute("data-value")];t.target.parentNode.classList.add("active"),i(n),s(n)}})})}(e)}),c.on("move",function(){var e=c.getCenter(),t=e.lng,n=e.lat;a.setState({lng:t.toFixed(4),lat:n.toFixed(4),zoom:c.getZoom().toFixed(2)})})},a.clearPopup=function(){var e=document.getElementsByClassName("mapboxgl-popup");e[0]&&e[0].remove()},a.handleToggle=function(){a.setState({open:!a.state.open}),document.querySelector(".burger-menu").classList.toggle("open")},a.handleClose=function(){return a.setState({open:!1})},a.updateQuery=function(e){a.setState({query:e});var t=document.getElementsByClassName("item"),n=document.getElementsByClassName("marker");e=e.toLowerCase(),a.clearPopup();for(var o=0;o<t.length;o++)t[o].innerText.toLowerCase().indexOf(e)>-1?(t[o].style.display="",n[o].style.display=""):(t[o].style.display="none",n[o].style.display="none")},a.state={api_key:"pk.eyJ1IjoicGFwYW51Z2dldCIsImEiOiJjamxsNW12NHUwdHdsM2tuN3YwcmhsOGxmIn0.ihrjyIuDCgAtDNpU4xeSSA",lng:-73.985128,lat:40.758939,zoom:12,locations:{},query:"",open:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getRestrooms()}},{key:"render",value:function(){var e=this,t=this.state,a=t.lng,n=t.lat,r=t.zoom;return o.a.createElement("main",null,o.a.createElement("div",{className:"inline-block absolute top right mt12 ml12 bg-darken75 color-white z1 py6 px12 round-full txt-s txt-bold"},o.a.createElement("div",null,"Longitude: ".concat(a," Latitude: ").concat(n," Zoom: ").concat(r))),o.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"absolute top right left bottom"}),o.a.createElement(y,{label:"Open Menu",onClick:this.handleToggle}),o.a.createElement(f.a,null,o.a.createElement(b.a,{docked:!1,width:"25%",open:this.state.open,onRequestChange:function(t){return e.setState({open:t})},style:{textAlign:"center"}},o.a.createElement(E,{updateQuery:this.updateQuery}),o.a.createElement("div",{className:"locations",id:"locations"},o.a.createElement("h2",{className:"title-large"},"Public Restrooms In Manhattan")))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){e.exports=a(197)},84:function(e,t,a){}},[[79,2,1]]]);
//# sourceMappingURL=main.cc321eac.chunk.js.map